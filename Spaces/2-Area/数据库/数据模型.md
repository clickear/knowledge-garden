---
title: 数据模型
date created: 2023-06-06
date modified: 2024-07-10
---

逻辑层，我们需要对所需存储的数据进行建模。数据模型不同，对应的存储方式不同。

[[关系型数据库]]的优缺点:  
优点：

1. 支持多对多，方便进行join
2. 支持[[ACID]]特性  
缺点:
1. 关系数据库的 schema 扩展很不方便。 与 [[monogodb]]比较
2. 关系数据库在大数据场景下 I/O 较高。 与 列式存储比较
3. 关系数据库的全文搜索功能比较弱。 与[[es]]比较。注意，mysql中的全文检索能力是不可用用于生产环境的。在数据量量比较大的时候，进行拆词，插入速度极慢。

+ [[关系型数据库]]， 大部分的DBMS都是关系型，比如[[mysql]]/pg等  
[[NoSQL]]数据库的四大分类  
[Nosql四大类](http://image.clickear.top/20230606203148.png)  

| 分类         | 数据模型           | 优势                                                 | 劣势                                           | 举例              |
| ------------ | ------------------ | ---------------------------------------------------- | ---------------------------------------------- | ----------------- |
| 键值数据库   | 哈希表             | 查找速度快                                           | 数据无结构化，通常只被当作字符串或者二进制数据 | [[redis]]             |
| 列存储数据库 | 列式数据存储       | 查找速度快；支持分布横向扩展；数据压缩率高           | 功能相对受限                                   | [[hbase]]            |
| 文档型数据库 | 键值对扩展         | 数据结构要求不严格；表结构可变；不需要预先定义表结构 | 查询性能不高，缺乏统一的查询语法               | [[monogodb]]          |
| 图数据库     | 节点和关系组成的图 | 利用图结构相关算法(最短路径、节点度关系查找等)       | 可能需要对整个图做计算，不利于图数据分布存储   | [[neo4j]][[janusgrap]] |

+ [[键值数据库]]Key/Value [[redis]]
+ [[图数据库]] Graph  
+ [[文档数据库]] Document [[monogodb]]
+ [[列族数据库]] Column-family 。列存储。如[[hbase]]  
机器学习:

+ [[矩阵数据库]] Array/Matrix  
已废弃的:

+ 层析数据模型， Hierarchical 已废弃
+ 网络数据模型， Network 已淘汰

> [!TIP] 技巧💡  
> 早期Hierarchical，类似现在的docuemnt db。对1对多支持很好。但是对多对多支持不好。后面人们主要的优化方向。  
> 当前的为解决层次模型的局限性，主要2个方向， 关系型模式(SQL,流行)和网络数据模型(已被废弃)。

在层次模型的树状结构中，每个记录都有一个唯一的父记录；在网络模型中，一个记录可以有多个父记录。这也就是网络模型多对多的解决方案。访问记录的唯一方法是从根记录沿着这些链接链进行路径查找。这被称为访问路径。这就导致了，找到数据要从头遍历，如果碰到多父记录的，会导致遍历复杂度变高。是有嵌套关系的  
而在 关系型模式中，数据都存储在tuples中。有关联的数据，没有嵌套关系。当要join查询的时候，可以根据条件，查询出表的所有匹配的数据。这样针对join，可以通过自动的 查询优化器，选择合适的索引。

### 文档数据库和网络数据模型的差异

文档数据库，看起来和网络数据模式是一样的，都是嵌套在json中，而不是单独的存储在表中。但是在多对多的情况下，关系型模式和文档数据库是一样的，都是通过引用来表示关系。只是在关系型模式叫外键，[[文档数据库]]叫文档引用。

### 关系型模式和文档数据库的差异

从数据模型来说，文档数据库，有更灵活的schme.

ddia
![image.png](http://image.clickear.top/20240711093156.png)
