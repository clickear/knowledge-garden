# 操作系统概述

操作系统特征： 并发性、共享性、虚拟性、不确定性

计算机启动流程: BIOS --> 主引导记录 --> 操作系统



# 进程管理

## 组成
进程控制块PCB(唯一标识)、程序(描述进程做什么)、数据(存放进程执行时所需数据)

## 状态
![20220421145711](http://image.clickear.top/20220421145711.png)
![20220421145711](http://image.clickear.top/20220421145711.png)
![20220421145711](http://image.clickear.top/20220421145711.png)
![](http://image.clickear.top/20220421145711.png)


## 前趋图 ⭐（和pmp中的很像）

## 进程资源图 ❓
P:progress
R:resource

所有进程都是阻塞节点，说明产生了死锁。

## 同步和互斥
互斥: 是指临界资源在同一个时间内只能由1个任务单独使用。与共享是反义词。
同步: 多个任务可以并发执行，只是速度有差异。

## 信号量操作 ❓
P操作(申请资源) S=S-1 : S>=0时，程序进行运行。 S<0,阻塞
V操作(释放资源) S=S+1;
![[Pasted image 20220421153106.png]]


## 死锁
对临界资源进行抢夺

N个进程，每个进程需要R个资源。则至少要 N * (R-1) +1 个资源就不会产生死锁。会发送死锁的最大资源数为 N * (R-1) 



### 银行家算法 ❓
![[Pasted image 20220421162221.png]]

## 线程
线程是独立调度的最小单元。共享进程的公共数据、代码和资源。
进程是拥有资源的最小单位。

# 存储管理
## 页式存储管理（固定大小）
优点: 利用率高、碎片小(只有最后一页有)、分配及管理简单
缺点: 增加系统开销，会产生抖动

### 逻辑地址和物理地址转换 ❓
![[Pasted image 20220527161605.png]]
页面大小 --> 页号




### 页面置换算法
最优算法
FIFO 
LRU (局部性原理)最少使用

![[Pasted image 20220421170423.png]]

### 快表()
快表， 将页表存在cache中
慢表，将页表存在内存中

## 段式存储(非固定大小，根据逻辑整体进行分段)
逻辑是一个整体，比如同一个程序。或者方法
真正内存地址 = 段内基地址 + 段内偏移地址

段表存储的是 段长 + 基地址

优点: 程序逻辑完整
缺点: 

## 段页式存储(先分段后分页)



# 文件管理


## 树形文件目录

+ 相对路径
+ 绝对路径
+ 全文件名 = 绝对路径 + 文件名
+ 

## 空闲存储空间管理
空闲



### 位示图 ❓
![[Pasted image 20220422135342.png]]

1个字 = 32bit

# 设备管理

## 设备分类方式
块设备、字符设备

独占设备、共享设备、虚拟设备

## IO软件层级结构
![20220422135551 ](http://image.clickear.top/20220422135551.png)
![](http://image.clickear.top/20220422135551.png)

## 输入输出结束 ⭐
### 程序控制(查询方式)
CPU主动查询外设是否完成传输

### 程序中断方式
外设完成数据传输后，向CPU发送中断.
中断响应时间: 是从发生中断请求到进入中断处理程序的时间
中断处理时间: 从中断处理程序开始到中断处理结束
中断向量表: 提供中断服务程序入口地址
多级嵌套，使用堆栈来保存断点和现场


### DMA (直接主存存取)❓
CPU只需要完成必要的初始化操作，数据的传输由DMA控制器完成。使用与硬盘等高速设备。

在一个<font color=#ff0000>总线周期结束</font>后，CPU会响应DMA请求开始读取数据。
CPU响应程序中断方式请求是在一条<font color=#ff0000>指令执行结束</font>时。


## 虚拟设备和SPOOLING技术

一台物理设备(如打印机)，在同一时间内只能由1个进程使用，其它进程只能等待。这种极大浪费了外设的工作效率。可以引入SPOOLING技术，简单理解就是，对输入输出建立2个缓冲区，进行排队处理。使得实现了物理外设的共享，每个进程都感觉在使用1个打印机，这就是物理设备的虚拟化。
![[Pasted image 20220422164611.png]]



## 磁盘结构

寻道时间

### 算法
+ 先来先服务FCFS: 根据进程请求访问磁盘的先后顺序进行调度
+ 最短寻道时间优先SSTF: 请求访问磁道与当前磁道最近的进程优先调度，会产生 远处进程可能一直无法访问。
+ 扫描算法(电梯算法)SCAN:  方向一致进行扫描，与电梯类似，比如你是往上做。电梯是在3--> 4楼，虽然你在2楼，也得等移动到顶楼才能掉头。
+ 单向扫描调度算法 CSCAN： 与SCAN不同的是，只做单向移动。


# 微内核操作系统
微内核是指，将内核做的足够小，只放核心功能。其它独立的东西放到用户进程中。有点类似微内核插件系统这种方式。

用户态和核心态

![[Pasted image 20220425143415.png]]

# 嵌入式操作系统
![[Pasted image 20220425143452.png]]


