---
date created: 2022-09-15
date modified: 2022-09-15
title: reids集群模式
---

## 主从模式（不怎么用，）

在复制的概念中，数据库分为两类，一类是主数据库（master），另一类是从数据库(slave）。主数据库可以进行读写操作，当写操作导致数据变化时会自动将数据同步给从数据库。而从数据库一般是只读的，并接受主数据库同步过来的数据。一个主数据库可以拥有多个从数据库，而一个从数据库只能拥有一个主数据库。

**总结：引入主从复制机制的目的有两个**

- 一个是读写分离，分担 "master" 的读写压力
- 一个是方便做容灾恢复

缺点:

1. 自动容错和恢复功能.需要人工介入
2. 难维护，无法在线扩容

## Sentinel（哨兵）模式，自动版主从复制。副本存储

> **哨兵是一个独立的进程，作为进程，它会独立运行。其原理是哨兵通过发送命令，等待Redis服务器响应，从而监控运行的多个 Redis 实例**



优点：  
主从可以自动切换，系统更健壮，可用性更高(**可以看作自动版的主从复制**)

缺点:

- Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。

## Cluster 模式(推荐)，分片存储

Redis 的哨兵模式基本已经可以实现高可用，读写分离 ，但是在这种模式下每台 Redis 服务器都存储相同的数据，很浪费内存。实现了 Redis 的分布式存储，**也就是说每台 Redis 节点上存储不同的内容**。  
redis采用[[哈希槽]]来进行分配，而不是[[一致性hash算法]].
