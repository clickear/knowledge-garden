---
title: redis-string
date created: 2023-11-02
date modified: 2023-11-02
---

## String

æœ€ç®€å•çš„ç±»å‹ï¼Œå¯ä»¥å­˜å‚¨ æ•°å­—ã€å­—ç¬¦ä¸²ã€åºåˆ—åŒ–åçš„jsonå¯¹è±¡ã€äºŒè¿›åˆ¶å¯¹è±¡ç­‰ã€‚valueå€¼ä¸èƒ½å¤§äº512M.

> [!TIP] æŠ€å·§ğŸ’¡  
> æœ€å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯ï¼Œ
> 1. ç¼“å­˜ã€‚å¯ä»¥ç¼“å­˜jsonå¯¹è±¡ç­‰ã€‚
> 2. åˆ†å¸ƒå¼é”ï¼Œä½¿ç”¨setnx
> 3. counter,è®¡ç®—å™¨
> 4. é™æµå™¨

æˆ‘ä»¬å¸¸è¯´çš„[[åˆ†å¸ƒå¼é”]]

## å†…éƒ¨ç¼–ç 

[[sds]]

## ä½¿ç”¨åœºæ™¯

#### ç¼“å­˜

æ¶‰åŠåˆ°[[ç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§]]çš„é—®é¢˜ã€‚ å¦‚ä½•ç¼“å­˜jsonå¯¹è±¡æ—¶ï¼Œåº”è¯¥è¦æ³¨æ„åºåˆ—åŒ–å™¨ã€‚ä¸ºå‡å°‘å†…å­˜çš„å ç”¨ï¼Œä¸€èˆ¬ä¼šè½¬æ¢æˆ byte[]æ•°ç»„ï¼Œæœ‰äº›è¿˜ä¼šä½¿ç”¨ snappy è¿›è¡Œå‹ç¼©ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œåœ¨è¿›è¡Œè§£å‹

#### [[åˆ†å¸ƒå¼é”]]

![image.png](http://image.clickear.top/20231008232819.png)

åœ¨6.12ç‰ˆæœ¬ä¹‹åï¼Œæ‰æ”¯æŒè®¾ç½®è¿‡æœŸå¤±æ•ˆï¼Œä¿è¯åŸå­æ€§ã€‚  
åœ¨6.12ä¹‹å‰ï¼Œæˆ‘ä»¬å¸¸è¯´çš„setnxå‘½ä»¤ï¼Œæ˜¯ä¸æ”¯æŒè®¾ç½®è¿‡æœŸæ—¶é—´çš„ã€‚æ‰€ä»¥éœ€è¦åŠ luaè„šæœ¬ä¿è¯åŸå­æ€§ã€‚

`SET lock_key unique_value NX PX 10000`

- lock_key å°±æ˜¯ key é”®ï¼›
- unique_value æ˜¯å®¢æˆ·ç«¯ç”Ÿæˆçš„å”¯ä¸€çš„æ ‡è¯†ï¼›**é‡Šæ”¾æ—¶ï¼Œéœ€è¦åˆ¤æ–­ï¼Œæ˜¯å¦æ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯**
- NX ä»£è¡¨åªåœ¨ lock_key ä¸å­˜åœ¨æ—¶ï¼Œæ‰å¯¹ lock_key è¿›è¡Œè®¾ç½®æ“ä½œï¼›
- PX 10000 è¡¨ç¤ºè®¾ç½® lock_key çš„è¿‡æœŸæ—¶é—´ä¸º 10sï¼Œè¿™æ˜¯**ä¸ºäº†é¿å…å®¢æˆ·ç«¯å‘ç”Ÿå¼‚å¸¸è€Œæ— æ³•é‡Šæ”¾é”**ã€‚

PX --> pexpire  
ex --> expire  
exat --> expireat

#### counter

å¦‚æœstringæ˜¯æ•°å­—ç±»å‹æ—¶ï¼Œè¿˜æ”¯æŒè‡ªå¢æ“ä½œã€‚æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ç±»å‹javaç§çš„[[AtomicLong]].

```
incr key ==> incrby key 1  
incrby key count  
describe
```
