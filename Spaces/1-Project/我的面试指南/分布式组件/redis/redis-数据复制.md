---
title: redis-数据复制
date created: 2023-11-02
date modified: 2023-11-02
---

## 数据复制（副本或者分片）

从 Redis 的多服务节点来考虑，比如 Redis 的主从复制、哨兵模式，以及 Redis 集群。

### 主从同步 (主从复制)，无法自动恢复，难在线扩容

这是 Redis 高可用服务的最基础的保证，实现方案就是将从前的一台 Redis 服务器，同步数据到多台从 Redis 服务器上，即一主多从的模式，这样我们就可以对 Redis 做读写分离了，来承载更多的并发操作，这里和 MySQL 的主从复制原理上是一样的。  
缺点:

1. 自动容错和恢复功能.需要人工介入
2. 难维护，无法在线扩容

### Sentinel（哨兵模式）自动版主从复制。副本存储

在使用 Redis 主从服务的时候，会有一个问题，就是当 Redis 的主从服务器出现故障宕机时，需要手动进行恢复，为了解决这个问题，Redis 增加了哨兵模式（因为哨兵模式做到了可以监控主从服务器，并且提供自动容灾恢复的功能）

master选举过程:  
哨兵watch监控，标记 主观下线，然后进行投票。投票超过半数才算通过客观下线。

![http://image.clickear.top/20211222185049.png](http://image.clickear.top/20211222185049.png)
